include header.jade
link(rel='stylesheet', href='bower_components/textAngular/dist/textAngular.css')
link(rel='stylesheet', href='bower_components/font-awesome/css/font-awesome.css')
body.greyish(ng-app='messagesApp' ng-controller='messagesCtrl')
	include ./navbars/main.jade
	include ./navbars/messages-notifications.jade

	#messages.container
		.row
			.col-xs-3
				h2 Chats
			.col-xs-9
				h4.chat-name(ng-show='!edit_name' ng-bind='getName(chat)' ng-click='editName()') Chat name
				input.form-control.ng-cloak(type='text' ng-model='chat.name' ng-show='edit_name')
				button.btn.btn-success.ng-cloak(ng-click='saveName()' ng-show='edit_name') Save chat name
		hr
		.row
			.col-xs-3
				.ng-cloak.chat-picker(ng-repeat='_chat in orderedChats' style='{{chatChosen(_chat)}}')
					a(href='' ng-click='chooseChat(_chat)')
						.row.chat-id
							.col-xs-3
								span.glyphicon.glyphicon-user
							.col-xs-9
								| {{getName(_chat)}}
								br
								| {{lastDate(_chat)}}
			.col-xs-9
				.row(scroll-glue="glued")
					.row.message(ng-repeat='message in chat.messages')
						.col-xs-2
							p(ng-bind='getMessageSender(message)+": "')
						.col-xs-10
							div(compile='message.text')
		.row.ng-cloak
			.col-xs-offset-3.col-xs-9(style='padding:10px;')
				div(text-angular ta-toolbar='toolbar' ng-model='newMessage')
				button.btn.btn-primary(ng-click='sendMessage()') Send
				button.btn.btn-primary.send-button(ngf-select="sendFile($file)")
					span.glyphicon.glyphicon-paperclip
					|Send file

	// /container

	include footer.jade
	script(src="https://cdn.socket.io/socket.io-1.3.7.js")
	script(src='bower_components/angular-socket-io/socket.min.js')
	script(src='bower_components/angular-scroll-glue/src/scrollglue.js')
	script(src='bower_components/textAngular/dist/textAngular-rangy.min.js')
	script(src='bower_components/textAngular/dist/textAngular-sanitize.min.js')
	script(src='bower_components/textAngular/dist/textAngular.min.js')
	script(src='client/js/messages.js')